# Conditional profiling flags - only on Linux (not macOS)
UNAME := $(shell uname)
ifneq ($(UNAME), Darwin)
    PROFILE_FLAGS = -pg
else
    PROFILE_FLAGS = 
endif

PKG_CXXFLAGS = $(PROFILE_FLAGS) -g
PKG_FCFLAGS = $(PROFILE_FLAGS) -g
PKG_LIBS = $(PROFILE_FLAGS)

# C objects
C_OBJS = myc.o

# Fortran objects: refer to file names <name.o>, order reflects dependency structure
FT_OBJS = myfortran.o

# Define make targets
all: $(SHLIB) clean
$(SHLIB): $(FT_OBJS) $(C_OBJS)

# Dependency of the C wrapper
myc.o: myfortran.o


clean:
	@rm -rf *.o *.mod


